<nav class="sidebar">
  <div class="sidebar-header">
    <h3>课程导航</h3>
  </div>

  <ul class="sidebar-nav">
    <!-- 主页 -->
    <li class="nav-item {% if page.url == '/' %}active{% endif %}">
      <a href="{{ '/' | relative_url }}">🏠 首页</a>
    </li>

    <!-- 书籍列表 -->
    {% for book in site.books %}
      {% assign book_dir = book.dir %}
      {% assign book_pages = site.pages | where_exp: "item", "item.path contains book_dir" | sort: "path" %}

      <li class="nav-section">
        <div class="nav-section-header">
          <span class="section-icon">📚</span>
          <strong>{{ book.name }}</strong>
        </div>

        <ul class="nav-submenu">
          {% for chapter in book_pages %}
            {% if chapter.path contains '/README.md' %}
              <li class="nav-item {% if page.url == chapter.url %}active{% endif %}">
                <a href="{{ chapter.url | relative_url }}">📖 开始阅读</a>
              </li>
            {% else %}
              <li class="nav-item {% if page.url == chapter.url %}active{% endif %}">
                <a href="{{ chapter.url | relative_url }}">{{ chapter.title }}</a>
              </li>
            {% endif %}
          {% endfor %}
        </ul>
      </li>
    {% endfor %}
  </ul>
</nav>